<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Login Window</title>
  <script>
    fetch("config.json")
      .then(response => response.json())
      .then(conf => {
        window.onload = function () {
          var target = window.self === window.top ? window.opener : window.parent;
          var hash = window.location.hash;
          if (hash) {
            var token = hash.split('&')[0].split('=')[1];
            target.postMessage(token, conf.uri);
          }
        }
      });
  </script>
</head>
<body></body>
</html>
