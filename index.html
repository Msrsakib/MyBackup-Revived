<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>SpotMyBackup — Backup</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="main">
    <div id="backup">
      <h1>SpotMyBackup — Backup</h1>
      <p>This tool lets you export & import your Spotify playlists.</p>
      <button onclick="authorize()">Login with Spotify</button>
    </div>
  </div>
  <script>
    fetch("config.json")
      .then(response => response.json())
      .then(config => {
        window.config = config;
      });

    function authorize() {
      if (!window.config) {
        alert("Config not loaded.");
        return;
      }
      const redirect_uri = window.config.uri + "/login.html";
      const auth_url = `https://accounts.spotify.com/authorize?client_id=${window.config.id}&response_type=token&redirect_uri=${encodeURIComponent(redirect_uri)}&scope=playlist-read-private%20playlist-read-collaborative%20playlist-modify-private%20playlist-modify-public`;
      window.location.href = auth_url;
    }
  </script>
</body>
</html>
